import{w as D}from"./with-props-yZZmM4Op.js";import{r as o,n as e}from"./chunk-BAXFHI7N-Bz_EcWvQ.js";import{u as A,a as I,b as E}from"./store-Bud9INMO.js";const F=9.81;function R(s,a,i){const r=s*Math.PI/180,n=a*Math.cos(r),m=a*Math.sin(r),c=2*m/F,w=m*m/(2*F),g=n*c,P=n,M=[],N=200,k=c/N;for(let b=0;b<=N;b++){const h=b*k,V=n*h,f=m*h-.5*F*h*h;f>=0&&M.push({x:V,y:f})}return{puntos:M,tiempoVuelo:c,alturaMaxima:w,distanciaMaxima:g,velocidadFinal:P}}const C=()=>{const s=o.useRef(null),a=o.useRef(0),i=o.useRef(0),r=A(d=>d.simulator),[n,m]=o.useState([{x:0,y:0}]),[c,w]=o.useState(0),[g,P]=o.useState(0),[M,N]=o.useState(0),[k,b]=o.useState(0),[h,V]=o.useState(1);o.useEffect(()=>{const{puntos:d,alturaMaxima:t,distanciaMaxima:j,tiempoVuelo:v,velocidadFinal:l}=R(r.grade,r.speed,r.kg);m(d),w(t),P(j),N(v),b(l),V(r.type)},[r]);const{escala:f,width:y,height:p}=o.useMemo(()=>{let u=1;return g>0&&c>0&&(u=Math.min(520/g,320/c)),{escala:u*1.07,width:600,height:400}},[g,c]);return o.useEffect(()=>{const d=s.current;if(!d)return;const t=d.getContext("2d");if(!t)return;d.width=y,d.height=p;const j=()=>{t.clearRect(0,0,y,p),t.strokeStyle="#e5e7eb",t.lineWidth=2,t.beginPath(),t.moveTo(20,p-20),t.lineTo(y-20,p-20),t.stroke(),t.beginPath(),t.moveTo(20,p-20),t.lineTo(20,20),t.stroke();const v=l=>{let u,x;return h==2||h==3?(u=y/2,x=p-(l.y*f+20)):(u=l.x*f+20,x=p-(l.y*f+20)),{x:u,y:x}};if(t.beginPath(),t.strokeStyle="white",t.lineWidth=1,n.forEach((l,u)=>{const{x,y:T}=v(l);u===0?t.moveTo(x,T):t.lineTo(x,T)}),t.stroke(),a.current<n.length){const l=n[a.current],{x:u,y:x}=v(l);t.beginPath(),t.arc(u,x,12,0,Math.PI*2),t.fillStyle="cyan",t.fill()}a.current=(a.current+1)%n.length,i.current=requestAnimationFrame(j)};return i.current=requestAnimationFrame(j),()=>cancelAnimationFrame(i.current)},[f,p,n,y,r]),e.jsxs("div",{children:[e.jsx("canvas",{className:"w-full h-full",ref:s}),e.jsxs("div",{className:"text-center justify-center content-center",children:[e.jsxs("p",{children:[" Altura maxima: ",e.jsxs("span",{className:"text-cyan-400",children:[c.toFixed(2),"m"]}),", Distancia Maxima: ",e.jsxs("span",{className:"text-cyan-400",children:[g.toFixed(2),"m"]})]}),e.jsxs("p",{children:[" Tiempo de vuelo: ",e.jsxs("span",{className:"text-cyan-400",children:[M.toFixed(2),"s"]}),", Velocidad Final X: ",e.jsxs("span",{className:"text-cyan-400",children:[k.toFixed(2),"m/s"]})]})]})]})},K={type:1,grade:0,speed:0,kg:0},H=({captureValue:s,simulatorKey:a})=>e.jsxs("select",{className:"p-3 w-full bg-blue-950 text-white  rounded-lg border border-gray-700 focus:outline-0  focus:ring-blue-900 mb-3",onChange:i=>s(r=>({...r,[a]:i.target.value})),children:[e.jsx("option",{value:1,children:"Movimiento Parabólico"}),e.jsx("option",{value:2,children:"Tiro Vertical"})]}),S=({label:s,type:a,captureValue:i,simulatorKey:r,value:n})=>e.jsxs("div",{className:"flex flex-col w-full p-3 bg-blue-950 rounded-2xl",children:[e.jsx("label",{htmlFor:s.trim(),children:s}),e.jsx("input",{value:n,className:"bg-blue-400 rounded-xl focus:outline-1 text-gray-700 text-end",type:a,id:s.trim(),onChange:m=>i(c=>({...c,[r]:m.target.value}))})]}),{resetParameters:B,setParameters:W}=I.actions,L=()=>{const[s,a]=o.useState(K),i=E(),r=()=>{i(W(s))};return o.useEffect(()=>{(s.grade<0||s.grade>90)&&a(n=>({...n,grade:45})),s.speed<0&&a(n=>({...n,speed:0})),s.kg<0&&a(n=>({...n,kg:0})),s.type!=1&&a(n=>({...n,grade:90}))},[s]),e.jsxs("div",{className:" rounded-2xl",children:[e.jsx(H,{captureValue:a,simulatorKey:"type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center ",children:[e.jsx(S,{value:s.grade,captureValue:a,label:"Angulo de lanzamiento (θ)",simulatorKey:"grade",type:"number"}),e.jsx(S,{value:s.speed,captureValue:a,label:"Velocidad Inicial (m/s)",simulatorKey:"speed",type:"number"}),e.jsx(S,{value:s.kg,captureValue:a,label:"Masa del objeto (kg)",simulatorKey:"kg",type:"number"})]}),e.jsx("button",{className:" p-3 rounded-2xl mt-5 w-full cursor-pointer  bg-gradient-to-r from-purple-800 to-cyan-400 active: active:from-purple-500 active:to-cyan-200",onClick:r,children:"Simular"})]})},X=()=>e.jsx("section",{className:"flex flex-col w-full justify-center content-center mt-4 text-white ",children:e.jsxs("div",{className:"grid lg:grid-cols-2 md:grid-cols-2  content-center w-full justify-between gap-5  ",children:[e.jsx("div",{className:" w-full rounded-2xl relative bg-black  border-purple-950 border-1 hover:border-purple-900",children:e.jsx(C,{})}),e.jsxs("div",{className:"flex flex-col justify-center content-center p-3 bg-blue-1000 rounded-2xl  border-purple-950 border-1 hover:border-purple-900",children:[e.jsx("div",{className:"text-center font-bold text-2xl mb-2",children:e.jsx("h1",{className:"text-2x1  font-bold text-center mb-8 bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-cyan-400",children:"Parametros de simulacion"})}),e.jsx(L,{})]})]})}),G=D(X);export{G as default};
